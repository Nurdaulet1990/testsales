<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>课程页面</title>
  <link rel="stylesheet" href="style.css">
  <style>
    #videoContainer {
      position: relative;
      pointer-events: none; /* Prevents most direct interactions with the iframe */
    }
    .copyright-overlay {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background-color: rgba(0,0,0,0.7);
      color: white;
      padding: 5px 8px;
      border-radius: 3px;
      font-size: 12px;
      pointer-events: none;
      z-index: 999;
    }
    .no-sharing-warning {
      color: #e74c3c;
      font-weight: bold;
      margin: 10px 0;
      padding: 5px;
      border: 1px solid #e74c3c;
      background-color: #fadbd8;
      border-radius: 4px;
    }
  </style>
</head>
<body oncontextmenu="return false">
  <div class="course-container">
    <h2>欢迎回来！</h2>
    <div id="videoContainer">
      <!-- Copyright overlay will be added here -->
    </div>
    <p class="no-sharing-warning">严禁分享：本视频内容受版权保护，严禁分享链接或录制视频内容。违者将承担法律责任。</p>
    <p id="privateVideoNote" style="color: #666; font-style: italic;">注意：这是一个私人视频，您需要授权才能查看。</p>
    <button onclick="logout()">退出登录</button>
  </div>
  <script>
    // Disable keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      // Disable common keyboard shortcuts
      if ((e.ctrlKey || e.metaKey) && 
          (e.key === 'c' || e.key === 's' || e.key === 'u' || 
           e.key === 'p' || e.key === 'a' || e.key === 'e')) {
        e.preventDefault();
        return false;
      }
    });

    // Disable text selection
    document.onselectstart = function() { return false; };
    
    if (!localStorage.getItem("loggedInToday")) {
      window.location.href = "index.html";
    } else {
      const videoContainer = document.getElementById("videoContainer");
      
      // Create overlay with copyright notice
      const overlay = document.createElement("div");
      overlay.className = "copyright-overlay";
      overlay.textContent = "© 版权所有 - 禁止分享";
      
      const iframe = document.createElement("iframe");
      iframe.width = "560";
      iframe.height = "315";
      iframe.src = "https://www.youtube.com/embed/LBNQlV3yk3w?rel=0&modestbranding=1&controls=0";
      iframe.frameBorder = "0";
      iframe.allow = "accelerometer; encrypted-media; gyroscope; picture-in-picture";
      iframe.allowFullscreen = false;
      iframe.onload = function() {
        console.log("Video loaded");
        videoContainer.appendChild(overlay);
      };
      iframe.onerror = function() {
        document.getElementById("privateVideoNote").innerHTML += " <strong>无法加载视频。请确保您有权限观看此私人视频。</strong>";
      };
      videoContainer.appendChild(iframe);
      
      // Add unique user identifier watermark
      const userWatermark = document.createElement("div");
      userWatermark.className = "copyright-overlay";
      userWatermark.style.bottom = "40px";
      userWatermark.textContent = "授权用户ID: " + Math.random().toString(36).substr(2, 9);
      videoContainer.appendChild(userWatermark);
    }

    function logout() {
      localStorage.removeItem("loggedInToday");
      window.location.href = "index.html";
    }
    
    // Prevent drag and drop
    document.addEventListener('dragstart', function(e) {
      e.preventDefault();
      return false;
    });
    
    // Disable copy functionality
    document.addEventListener('copy', function(e) {
      e.preventDefault();
      return false;
    });
  </script>
</body>
</html>
